{"version":3,"sources":["components/Thumbnail/index.js","components/Topbar/index.js","components/PdfView/index.js","helper/pdf-thumbnails-generator.js","helper/read-file-as-base64.js","components/FileInput/index.js","icon.svg","components/Main/index.js","GitHub-Mark-64px.png","App.js","index.js"],"names":["Thumbnail","imgsrc","pageId","handleDelete","className","size","onClick","src","width","alt","Topbar","props","children","Sortable","mount","MultiDrag","PdfView","file","fileId","updateList","updateCheck","useState","list","setList","checked","setChecked","useEffect","initList","map","f","id","page","updatedList","filter","l","pages","from","style","display","defaultSize","height","maxWidth","minWidth","handleClasses","right","enable","top","bottom","left","topRight","bottomRight","bottomLeft","topLeft","onChange","e","target","labelPlacement","LABEL_PLACEMENT","multiDrag","group","animation","delayOnTouchStart","delay","selectedClass","ghostClass","swapThreshold","onSort","item","thumbnail","pdfjsLib","workerSrc","makeThumbnail","scale","getViewport","scaledViewport","canvas","document","createElement","render","canvasContext","getContext","viewport","promise","then","toDataURL","catch","error","console","generatePdfThumbnails","source","a","url","pdfDocument","log","pageNum","Array","length","numPages","x","i","Promise","all","num","getPage","readFileDataAsBase64","resolve","reject","reader","FileReader","onload","event","result","onerror","err","readAsDataURL","FileInput","handlefile","processing","multiple","accept","onDrop","acceptedFiles","rejectedFiles","progressMessage","Main","handleSave","loaded","isLoading","isSaving","pageCount","href","icon","App","pdfList","setPdfList","srcPdfDoc","setSrcPdfDoc","workingList","setWorkingList","setIsLoading","setIsSaving","initSave","p","reduce","sum","curr","newSate","update","files","thumbnailTasks","sourceFileTasks","doc","push","PDFDocument","load","srcFiles","thumbnailsList","concat","create","pdfDoc","j","copyPages","srcPage","addPage","save","pdfBytes","download","engine","Styletron","ReactDOM","StrictMode","value","theme","LightTheme","getElementById"],"mappings":"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","file":"static/js/main.8f716547.chunk.js","sourcesContent":["import './style.scss';\nimport DeleteAlt from 'baseui/icon/delete-alt'\n\nconst Thumbnail = ({ imgsrc, pageId, handleDelete }) => {\n\n    return (\n        <div className='page-card grid-item'>\n            <div className='delete'>\n                <DeleteAlt size={24}  onClick={()=> handleDelete(pageId)}/>\n            </div>\n            <img src={imgsrc} width={'100%'} alt='' />\n        </div>\n    )\n}\n\nexport default Thumbnail","import './style.scss'\n\n\n\nconst Topbar = (props) => {\n    return (\n        <div className='topbar'>\n            {props.children}\n        </div>\n    )\n}\n\nexport default Topbar","// import { Document, Page, pdfjs } from \"react-pdf\";\n\nimport React, { useState, useEffect } from 'react';\nimport { ReactSortable } from \"react-sortablejs\";\nimport { Sortable, MultiDrag } from \"sortablejs\"\n// https://www.npmjs.com/package/re-resizable#props\nimport { Resizable } from \"re-resizable\";\nimport './style.scss'\n\nimport Thumbnail from '../Thumbnail/index'\nimport Topbar from '../Topbar';\n\nimport {\n  Checkbox,\n  LABEL_PLACEMENT\n} from \"baseui/checkbox\";\n\nSortable.mount(new MultiDrag());\n\nconst PdfView = ({ file, fileId, updateList, updateCheck }) => {\n  const [list, setList] = useState([])\n  const [checked, setChecked] = useState(true);\n\n  useEffect(() => {\n    const initList = file.map(f => {\n      return {\n        ...f,\n        id: `${fileId}-${f.page - 1}`,\n        file: fileId\n      }\n    })\n    setList(initList)\n  }, [file, fileId])\n\n  const handleCheck = (e) => {\n    setChecked(e.target.checked)\n    updateCheck(fileId)\n  }\n\n  const handleUpdate = () => {\n    updateList({ id: fileId, pages: list.map(l => { return { from: l.file, page: l.page - 1 } }), checked: checked }, fileId)\n  }\n\n  const handleDelete = (id) => {\n    const updatedList = list.filter(l => l.id !== id)\n    setList(updatedList)\n    updateList({ id: fileId, pages: updatedList.map(l => { return { from: l.file, page: l.page - 1 } }), checked: checked }, fileId)\n  }\n\n  return (\n    <div className='doc'>\n      <Resizable\n        style={{ display: \"flex\" }}\n        defaultSize={{ width: '200', height: '100vh' }}\n        maxWidth='600'\n        minWidth='160'\n        handleClasses={{ right: 'handle' }}\n        enable={{ top: false, right: true, bottom: false, left: false, topRight: false, bottomRight: false, bottomLeft: false, topLeft: false }}\n      >\n        <Topbar>\n          <div className='checkbox'>\n            <Checkbox\n              checked={checked}\n              onChange={handleCheck}\n              labelPlacement={LABEL_PLACEMENT.right}\n            />\n          </div>\n        </Topbar>\n\n        <div className='pages'>\n          <ReactSortable\n            multiDrag\n            list={list}\n            setList={setList}\n            group=\"groupName\"\n            animation={200}\n            delayOnTouchStart={true}\n            delay={2}\n            selectedClass='selected'\n            ghostClass='selected'\n            swapThreshold={0.5}\n            className='grid-container'\n            onSort={handleUpdate}\n          >\n            {list.map((item) => (\n              <Thumbnail\n                key={item.id}\n                imgsrc={item.thumbnail}\n                pageId={item.id}\n                handleDelete={handleDelete}\n              />\n            ))}\n          </ReactSortable>\n        </div>\n      </Resizable>\n    </div>\n  )\n}\n\nexport default PdfView","import * as pdfjsLib from 'pdfjs-dist';\npdfjsLib.GlobalWorkerOptions.workerSrc =\n  `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.js`;\n\n/**\n * @param  {Object} page\n * @param  {Number} size\n * @return {String}\n */\nconst makeThumbnail = (page, size) => {\n  // draw page to fit into input size canvas\n  const desiredWidth = size;\n  const viewPort = page.getViewport({ scale: 1 });\n\n  const scale = desiredWidth / viewPort.width;\n  const scaledViewport = page.getViewport({ scale: scale });\n\n  const canvas = document.createElement(\"canvas\");\n  canvas.height = scaledViewport.height;\n  canvas.width = scaledViewport.width;\n\n  return page\n    .render({\n      canvasContext: canvas.getContext(\"2d\"),\n      viewport: scaledViewport,\n    })\n    .promise.then(function () {\n      return canvas.toDataURL();\n    })\n    .catch(error => console.error(error));\n};\n\n/**\n * @param  {String} source\n * @param  {Number} size\n * @return {Array}\n */\nexport const generatePdfThumbnails = async (source, size) => {\n\n  try {\n    const pdfDocument = await pdfjsLib.getDocument({ url: source, }).promise\n\n    console.log('PDF loaded');\n\n    const pageNum = Array.from({ length: pdfDocument.numPages }, (x, i) => i + 1);\n\n    return Promise.all(\n      pageNum.map((num) =>\n        pdfDocument\n          .getPage(num)\n          .then((page) => makeThumbnail(page, size))\n          .then((thumbnail) => ({\n            page: num,\n            thumbnail,\n          }))\n      )\n    );\n\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n\n\nexport default generatePdfThumbnails;","  export default function readFileDataAsBase64(file) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        resolve(event.target.result);\n      };\n      reader.onerror = (err) => {\n        reject(err);\n      };\n      reader.readAsDataURL(file);\n    });\n  }","import './style.scss'\n\nimport * as React from 'react';\nimport { FileUploader } from 'baseui/file-uploader';\n\n\nexport default function FileInput({ handlefile, processing }) {\n    // function reset() {\n    //     setIsUploading(false);\n    //     clearTimeout(timeoutId.current);\n    // }\n    // startProgress is only illustrative. Use the progress info returned\n    // from your upload endpoint. This example shows how the file-uploader operates\n    // if there is no progress info available.\n    return (\n        <div className='input'>\n            <div >\n                <FileUploader\n                    className='uploader'\n                    multiple\n                    accept='application/pdf'\n                    // onCancel={reset}\n                    onDrop={(acceptedFiles, rejectedFiles) => {\n                        handlefile(acceptedFiles)\n                    }}\n                    progressMessage={\n                        processing ? `Loading... hang tight.` : ''\n                    }\n                />\n            </div>\n        </div>\n    );\n}","export default __webpack_public_path__ + \"static/media/icon.2b1622cc.svg\";","import Topbar from \"../Topbar/index\"\nimport './style.scss'\n\nimport * as React from 'react';\n\nimport FileInput from \"../FileInput\";\nimport { Button } from \"baseui/button\";\n\nimport githubIcon from '../../GitHub-Mark-64px.png'\nimport icon from '../../icon.svg'\n\nexport default function Main({ handlefile, handleSave, loaded, isLoading, isSaving, pageCount }) {\n  // startProgress is only illustrative. Use the progress info returned\n  // from your upload endpoint. This example shows how the file-uploader operates\n  // if there is no progress info available.\n  return (\n    <div className='container'>\n      {/* <Topbar>\n      </Topbar> */}\n      <div className='github'>\n        <a href='https://github.com/ynynl/severless-pdf-merge'>\n          <img src={githubIcon} width={24} alt=''></img>\n        </a>\n      </div>\n      <div className='content'>\n\n        <img src={icon} width={100} alt=''></img>\n\n        <p>no server. fully private.</p>\n\n        <h1>\n          PDF Arrange and Combine\n        </h1>\n\n        <FileInput handlefile={handlefile} processing={isLoading} />\n        {/* <Controller /> */}\n        {loaded &&\n          <div className='button'>\n            <Button\n              onClick={handleSave}\n              isLoading={isSaving}\n            >\n              Combine and Save {pageCount} Pages\n              </Button>\n          </div>\n        }\n      </div>\n    </div>\n  );\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEyRTk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTE3OEEyRjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJDOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJEOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+FYrpWAAABrNJREFUeNrkW2ls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\"","import './App.scss';\nimport React, { useState, useEffect } from 'react';\nimport PdfView from './components/PdfView/index';\nimport { PDFDocument } from 'pdf-lib'\nimport download from 'downloadjs'\nimport generatePdfThumbnails from './helper/pdf-thumbnails-generator';\nimport readFileDataAsBase64 from './helper/read-file-as-base64'\nimport Main from './components/Main/index';\n\n\n\nfunction App() {\n  const [pdfList, setPdfList] = useState([]);\n  const [srcPdfDoc, setSrcPdfDoc] = useState([])\n  const [workingList, setWorkingList] = useState([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [isSaving, setIsSaving] = useState(false)\n\n  useEffect(() => {\n    const initSave = pdfList.map((pages, i) => (i > workingList.length - 1)\n      ? { id: i, pages: pages.map(p => { return { from: i, page: p.page - 1 } }), checked: true }\n      : workingList[i])\n    setWorkingList(initSave)\n  }, [pdfList])\n\n  const pageCount = workingList.reduce((sum, curr) => (curr.checked) ? sum + curr.pages.length : sum, 0)\n  // const docCount = workingList.reduce((sum, curr) => (curr.checked && curr.page.length) ? sum + 1 : sum, 0)\n\n  /**\n   * \n   * @param {object} newSate \n   * @param {number} id \n   */\n  const updateList = (newSate, id) => {\n    const update = workingList.map(l => (l.id === id) ? newSate : l)\n    setWorkingList(update)\n  }\n\n  const updateCheck = (id) => {\n    const update = workingList.map(l => (l.id === id) ? { ...l, checked: !l.checked } : l)\n    setWorkingList(update)\n  }\n\n  const handlefile = async (files) => {\n    setIsLoading(true)\n    try {\n      const thumbnailTasks = []\n      const sourceFileTasks = []\n\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i]\n        const doc = await readFileDataAsBase64(file)\n        sourceFileTasks.push(\n          PDFDocument.load(doc)\n        )\n        thumbnailTasks.push(\n          generatePdfThumbnails(doc, 600)\n        )\n      }\n\n      const srcFiles = await Promise.all(sourceFileTasks)\n      const thumbnailsList = await Promise.all(thumbnailTasks)\n\n      setSrcPdfDoc(srcPdfDoc.concat(srcFiles))\n      setPdfList(pdfList.concat(thumbnailsList))\n      setIsLoading(false)\n    } catch (error) {\n      console.log(error);\n      setIsLoading(false)\n    }\n  }\n\n  const handleSave = async () => {\n    setIsSaving(true)\n    const pdfDoc = await PDFDocument.create()\n\n    for (let i = 0; i < workingList.length; i++) {\n      if (workingList[i].checked) {\n        const pages = workingList[i].pages\n        console.log('save', pages);\n        for (let j = 0; j < pages.length; j++) {\n          const p = pages[j]\n          const [srcPage] = await pdfDoc.copyPages(srcPdfDoc[p.from], [p.page])\n          pdfDoc.addPage(srcPage)\n        }\n      }\n    }\n    const pdfBytes = await pdfDoc.save()\n    download(pdfBytes, \"mergedPDF.pdf\", \"application/pdf\");\n    setIsSaving(false)\n  }\n\n\n  return (\n    <div className='App'>\n      {pdfList.map((f, i) => {\n        return <PdfView\n          className='row'\n          key={i}\n          fileId={i}\n          file={f}\n          updateList={updateList}\n          updateCheck={updateCheck}\n        />\n      })}\n\n      <Main \n      className='row' \n      handlefile={handlefile} \n      handleSave={handleSave} \n      loaded={!!workingList.length} \n      isLoading={isLoading} \n      isSaving={isSaving} \n      pageCount={pageCount}\n      // docCount={docCount}\n      />\n\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.scss';\n\nimport { Client as Styletron } from 'styletron-engine-atomic';\nimport { Provider as StyletronProvider } from 'styletron-react';\nimport { LightTheme, BaseProvider } from 'baseui';\nconst engine = new Styletron();\n\nReactDOM.render(\n  <React.StrictMode>\n    <StyletronProvider value={engine}>\n      <BaseProvider theme={LightTheme}>\n        <App />\n      </BaseProvider>\n    </StyletronProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}