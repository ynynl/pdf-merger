(this.webpackJsonppdf=this.webpackJsonppdf||[]).push([[0],{107:function(e,n,t){},110:function(e,n,t){},111:function(e,n,t){},126:function(e,n,t){},161:function(e,n){},162:function(e,n){},163:function(e,n){},164:function(e,n){},165:function(e,n){},166:function(e,n,t){},167:function(e,n,t){},170:function(e,n,t){},172:function(e,n,t){"use strict";t.r(n);var c=t(4),a=t.n(c),r=t(77),i=t.n(r),o=t(18),s=t.n(o),l=t(36),u=t(34),d=t(16),g=(t(107),t(78)),h=t(43),f=t(100),p=(t(110),t(111),t(79)),b=t.n(p),j=t(8),v=function(e){var n=e.imgsrc,t=e.pageId,c=e.handleDelete;return Object(j.jsxs)("div",{className:"page-card grid-item",children:[Object(j.jsx)("div",{className:"delete",children:Object(j.jsx)(b.a,{size:24,onClick:function(){return c(t)}})}),Object(j.jsx)("img",{src:n,width:"100%",alt:""})]})},m=(t(126),function(e){return Object(j.jsx)("div",{className:"topbar",children:e.children})}),A=t(187),w=t(14);h.Sortable.mount(new h.MultiDrag);var O=function(e){var n=e.file,t=e.fileId,a=e.updateList,r=e.updateCheck,i=Object(c.useState)([]),o=Object(d.a)(i,2),s=o[0],l=o[1],h=Object(c.useState)(!0),p=Object(d.a)(h,2),b=p[0],O=p[1];Object(c.useEffect)((function(){var e=n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:"".concat(t,"-").concat(e.page-1),file:t})}));l(e)}),[n,t]);var x=function(e){var n=s.filter((function(n){return n.id!==e}));l(n),a({id:t,pages:n.map((function(e){return{from:e.file,page:e.page-1}})),checked:b},t)};return Object(j.jsx)("div",{className:"doc",children:Object(j.jsxs)(f.a,{style:{display:"flex"},defaultSize:{width:"200",height:"100vh"},maxWidth:"600",minWidth:"160",handleClasses:{right:"handle"},enable:{top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},children:[Object(j.jsx)(m,{children:Object(j.jsx)("div",{className:"checkbox",children:Object(j.jsx)(A.a,{checked:b,onChange:function(e){O(e.target.checked),r(t)},labelPlacement:w.a.right})})}),Object(j.jsx)("div",{className:"pages",children:Object(j.jsx)(g.ReactSortable,{multiDrag:!0,list:s,setList:l,group:"groupName",animation:200,delayOnTouchStart:!0,delay:2,selectedClass:"selected",ghostClass:"selected",swapThreshold:.5,className:"grid-container",onSort:function(){a({id:t,pages:s.map((function(e){return{from:e.file,page:e.page-1}})),checked:b},t)},children:s.map((function(e){return Object(j.jsx)(v,{imgsrc:e.thumbnail,pageId:e.id,handleDelete:x},e.id)}))})})]})})},x=t(53),k=t(95),D=t.n(k),S=t(45);S.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(S.version,"/pdf.worker.js");var N=function(e,n){var t=n/e.getViewport({scale:1}).width,c=e.getViewport({scale:t}),a=document.createElement("canvas");return a.height=c.height,a.width=c.width,e.render({canvasContext:a.getContext("2d"),viewport:c}).promise.then((function(){return a.toDataURL()})).catch((function(e){return console.error(e)}))},I=function(){var e=Object(l.a)(s.a.mark((function e(n,t){var c,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.getDocument({url:n}).promise;case 3:return c=e.sent,console.log("PDF loaded"),a=Array.from({length:c.numPages},(function(e,n){return n+1})),e.abrupt("return",Promise.all(a.map((function(e){return c.getPage(e).then((function(e){return N(e,t)})).then((function(n){return{page:e,thumbnail:n}}))}))));case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n,t){return e.apply(this,arguments)}}();function E(e){return new Promise((function(n,t){var c=new FileReader;c.onload=function(e){n(e.target.result)},c.onerror=function(e){t(e)},c.readAsDataURL(e)}))}t(166),t(167);var B=t(184);function R(e){var n=e.handlefile,t=e.processing;return Object(j.jsx)("div",{className:"input",children:Object(j.jsx)("div",{children:Object(j.jsx)(B.a,{className:"uploader",multiple:!0,accept:"application/pdf",onDrop:function(e,t){n(e)},progressMessage:t?"Loading... hang tight.":""})})})}var L=t(185),P=t.p+"static/media/icon.2b1622cc.svg";function U(e){var n=e.handlefile,t=e.handleSave,c=e.loaded,a=e.isLoading,r=e.isSaving,i=e.pageCount;return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("div",{className:"github",children:Object(j.jsx)("a",{href:"https://github.com/ynynl/severless-pdf-merge",children:Object(j.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEyRTk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTE3OEEyRjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJDOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJEOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+FYrpWAAABrNJREFUeNrkW2ls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",width:24,alt:""})})}),Object(j.jsxs)("div",{className:"content",children:[Object(j.jsx)("img",{src:P,width:100,alt:""}),Object(j.jsx)("p",{children:"no server. fully private."}),Object(j.jsx)("h1",{children:"PDF Arrange and Combine"}),Object(j.jsx)(R,{handlefile:n,processing:a}),c&&Object(j.jsx)("div",{className:"button",children:Object(j.jsxs)(L.a,{onClick:t,isLoading:r,children:["Combine and Save ",i," Pages"]})})]})]})}var M=function(){var e=Object(c.useState)([]),n=Object(d.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)([]),i=Object(d.a)(r,2),o=i[0],g=i[1],h=Object(c.useState)([]),f=Object(d.a)(h,2),p=f[0],b=f[1],v=Object(c.useState)(!1),m=Object(d.a)(v,2),A=m[0],w=m[1],k=Object(c.useState)(!1),S=Object(d.a)(k,2),N=S[0],B=S[1];Object(c.useEffect)((function(){var e=t.map((function(e,n){return n>p.length-1?{id:n,pages:e.map((function(e){return{from:n,page:e.page-1}})),checked:!0}:p[n]}));b(e)}),[t]);var R=p.reduce((function(e,n){return n.checked?e+n.pages.length:e}),0),L=function(e,n){var t=p.map((function(t){return t.id===n?e:t}));b(t)},P=function(e){var n=p.map((function(n){return n.id===e?Object(u.a)(Object(u.a)({},n),{},{checked:!n.checked}):n}));b(n)},M=function(){var e=Object(l.a)(s.a.mark((function e(n){var c,r,i,l,u,d,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(!0),e.prev=1,c=[],r=[],i=0;case 5:if(!(i<n.length)){e.next=15;break}return l=n[i],e.next=9,E(l);case 9:u=e.sent,r.push(x.PDFDocument.load(u)),c.push(I(u,600));case 12:i++,e.next=5;break;case 15:return e.next=17,Promise.all(r);case 17:return d=e.sent,e.next=20,Promise.all(c);case 20:h=e.sent,g(o.concat(d)),a(t.concat(h)),w(!1),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(1),console.log(e.t0),w(!1);case 30:case"end":return e.stop()}}),e,null,[[1,26]])})));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(s.a.mark((function e(){var n,t,c,a,r,i,l,u,g;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),e.next=3,x.PDFDocument.create();case 3:n=e.sent,t=0;case 5:if(!(t<p.length)){e.next=24;break}if(!p[t].checked){e.next=21;break}c=p[t].pages,console.log("save",c),a=0;case 10:if(!(a<c.length)){e.next=21;break}return r=c[a],e.next=14,n.copyPages(o[r.from],[r.page]);case 14:i=e.sent,l=Object(d.a)(i,1),u=l[0],n.addPage(u);case 18:a++,e.next=10;break;case 21:t++,e.next=5;break;case 24:return e.next=26,n.save();case 26:g=e.sent,D()(g,"mergedPDF.pdf","application/pdf"),B(!1);case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"App",children:[t.map((function(e,n){return Object(j.jsx)(O,{className:"row",fileId:n,file:e,updateList:L,updateCheck:P},n)})),Object(j.jsx)(U,{className:"row",handlefile:M,handleSave:y,loaded:!!p.length,isLoading:A,isSaving:N,pageCount:R})]})},y=(t(170),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function T(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var W=t(99),J=t(23),C=t(186),Y=t(173),Q=new W.a;i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(J.Provider,{value:Q,children:Object(j.jsx)(C.a,{theme:Y.a,children:Object(j.jsx)(M,{})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/severless-pdf-merge",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/severless-pdf-merge","/service-worker.js");y?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var c=t.headers.get("content-type");404===t.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):T(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):T(n,e)}))}}()}},[[172,1,2]]]);
//# sourceMappingURL=main.b682e07e.chunk.js.map