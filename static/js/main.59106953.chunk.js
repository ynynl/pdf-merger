(this.webpackJsonppdf=this.webpackJsonppdf||[]).push([[0],{109:function(e,t,n){},111:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},132:function(e,t,n){},167:function(e,t){},168:function(e,t){},169:function(e,t){},170:function(e,t){},171:function(e,t){},172:function(e,t,n){},173:function(e,t,n){},177:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n.n(a),r=n(79),i=n.n(r),s=(n(109),n(20)),o=n.n(s),u=n(38),l=n(36),d=n(18),f=(n(111),n(80)),h=n(45),p=n(103),j=(n(116),n(117),n(81)),b=n.n(j),m=n(9),g=function(e){var t=e.imgsrc,n=e.pageId,a=e.handleDelete;return Object(m.jsxs)("div",{className:"page-card grid-item",children:[Object(m.jsx)("div",{className:"delete",children:Object(m.jsx)(b.a,{size:24,onClick:function(){return a(n)}})}),Object(m.jsx)("img",{src:t,width:"100%",alt:""})]})},v=(n(132),function(e){return Object(m.jsx)("div",{className:"topbar",children:e.children})}),x=n(192),O=n(15);h.Sortable.mount(new h.MultiDrag);var k=function(e){var t=e.file,n=e.fileId,c=e.updateList,r=e.updateCheck,i=Object(a.useState)([]),s=Object(d.a)(i,2),o=s[0],u=s[1],h=Object(a.useState)(!0),j=Object(d.a)(h,2),b=j[0],k=j[1];Object(a.useEffect)((function(){var e=t.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{id:"".concat(n,"-").concat(e.page-1),file:n})}));u(e)}),[t,n]);var w=function(e){var t=o.filter((function(t){return t.id!==e}));u(t),c({id:n,pages:t.map((function(e){return{from:e.file,page:e.page-1}})),checked:b},n)};return Object(m.jsx)("div",{className:"doc",children:Object(m.jsxs)(p.a,{style:{display:"flex"},defaultSize:{width:"200",height:"100vh"},maxWidth:"600",minWidth:"150",handleClasses:{right:"handle"},enable:{top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},children:[Object(m.jsx)(v,{children:Object(m.jsx)(x.a,{checked:b,onChange:function(e){k(e.target.checked),r(n)},labelPlacement:O.a.right})}),Object(m.jsx)("div",{className:"pages",children:Object(m.jsx)(f.ReactSortable,{multiDrag:!0,list:o,setList:u,group:"groupName",animation:200,delayOnTouchStart:!0,delay:2,selectedClass:"selected",ghostClass:"selected",swapThreshold:.5,className:"grid-container",onSort:function(){c({id:n,pages:o.map((function(e){return{from:e.file,page:e.page-1}})),checked:b},n)},children:o.map((function(e){return Object(m.jsx)(g,{imgsrc:e.thumbnail,pageId:e.id,handleDelete:w},e.id)}))})})]})})},w=n(55),S=n(97),D=n.n(S),N=n(47);N.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(N.version,"/pdf.worker.js");var P=function(e,t){var n=t/e.getViewport({scale:1}).width,a=e.getViewport({scale:n}),c=document.createElement("canvas");return c.height=a.height,c.width=a.width,e.render({canvasContext:c.getContext("2d"),viewport:a}).promise.then((function(){return c.toDataURL()})).catch((function(e){return console.error(e)}))},C=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.getDocument({url:t}).promise;case 3:return a=e.sent,console.log("PDF loaded"),c=Array.from({length:a.numPages},(function(e,t){return t+1})),e.abrupt("return",Promise.all(c.map((function(e){return a.getPage(e).then((function(e){return P(e,n)})).then((function(t){return{page:e,thumbnail:t}}))}))));case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),y=(n(172),n(173),n(189));function L(e){var t=e.handlefile,n=a.useState(!1),c=Object(d.a)(n,2),r=c[0],i=c[1],s=a.useRef(null);function o(){i(!1),clearTimeout(s.current)}return Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("div",{children:Object(m.jsx)(y.a,{className:"uploader",multiple:!0,accept:"application/pdf",onCancel:o,onDrop:function(e,n){t(e)},progressMessage:r?"Uploading... hang tight.":""})})})}var R=n(190),F=n(100);function A(e){var t=e.handlefile,n=e.handleSave,a=e.loaded;return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)(v,{}),Object(m.jsxs)("div",{className:"input",children:[Object(m.jsx)(F.a,{children:"Arrange & Combine PDF (severless)"}),Object(m.jsx)("div",{children:Object(m.jsx)(L,{handlefile:t})}),a&&Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(R.a,{onClick:n,children:"SAVE"})})]})]})}var E=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),i=Object(d.a)(r,2),s=i[0],f=i[1],h=Object(a.useState)([]),p=Object(d.a)(h,2),j=p[0],b=p[1];Object(a.useEffect)((function(){var e=n.map((function(e,t){return t>j.length-1?{id:t,pages:e.map((function(e){return{from:t,page:e.page-1}})),checked:!0}:j[t]}));b(e)}),[n]);var g=function(e,t){var n=j.map((function(n){return n.id===t?e:n}));b(n)},v=function(e){var t=j.map((function(t){return t.id===e?Object(l.a)(Object(l.a)({},t),{},{checked:!t.checked}):t}));b(t)},x=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,r,i,u,l,d,h;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a=[],r=[],i=0;case 4:if(!(i<t.length)){e.next=14;break}return u=t[i],e.next=8,S(u);case 8:l=e.sent,r.push(w.PDFDocument.load(l)),a.push(C(l,600));case 11:i++,e.next=4;break;case 14:return e.next=16,Promise.all(r);case 16:return d=e.sent,e.next=19,Promise.all(a);case 19:h=e.sent,f(s.concat(d)),c(n.concat(h)),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.log(e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,c,r,i,u,l,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.PDFDocument.create();case 2:t=e.sent,n=0;case 4:if(!(n<j.length)){e.next=23;break}if(!j[n].checked){e.next=20;break}a=j[n].pages,console.log("save",a),c=0;case 9:if(!(c<a.length)){e.next=20;break}return r=a[c],e.next=13,t.copyPages(s[r.from],[r.page]);case 13:i=e.sent,u=Object(d.a)(i,1),l=u[0],t.addPage(l);case 17:c++,e.next=9;break;case 20:n++,e.next=4;break;case 23:return e.next=25,t.save();case 25:f=e.sent,D()(f,"mergedPDF.pdf","application/pdf");case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function S(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(e){t(e.target.result)},a.onerror=function(e){n(e)},a.readAsDataURL(e)}))}return Object(m.jsxs)("div",{className:"App",children:[n.map((function(e,t){return Object(m.jsx)(k,{className:"row",fileId:t,file:e,updateList:g,updateCheck:v},t)})),Object(m.jsx)(A,{className:"row",handlefile:x,handleSave:O,loaded:!!j.length})]})},I=n(102),M=n(25),T=n(191),U=n(178),V=new I.a;i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(M.Provider,{value:V,children:Object(m.jsx)(T.a,{theme:U.a,children:Object(m.jsx)(E,{})})})}),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.59106953.chunk.js.map